<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Tracker</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #121212;
            color: #1DB954;
            text-align: center;
            padding: 20px;
            margin: 0;
            position: relative;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
        }
		.header h2 {
    font-size: 24px; /* Adjust font size as needed */
    margin: 0;
    background: linear-gradient(to bottom right, #ff0033, #3300ff);
    -webkit-background-clip: text;
    color: transparent;
}
		.header h1 {
              font-size: 18px; /* Reduce this value as needed */
              margin: 0; /* Optional: remove default margin */
			  linear-gradient(to bottom right, #ff0033, #3300ff);
        }
        .menu-icon {
            font-size: 18px;
			width: 30px;     /* set to your preferred width */
            height: 30px;
            cursor: pointer;
            background-color: rgba(29, 185, 84, 0.2);
            border: none;
            color: #1DB954;
            padding: 6px;
            border-radius: 4px;
            transition: background 0.3s ease;
        }
        .menu-icon:hover {
            background-color: rgba(29, 185, 84, 0.4);
        }
        .menu {
    display: none;
    position: absolute;
    top: 50px;
    right: 20px;
    background-color: #191414;
    border-radius: 5px;
    box-shadow: 0px 4px 10px rgba(255, 255, 255, 0.1);
    width: 150px;
    text-align: left;
    z-index: 1001; /* Added this line to ensure it's on top */
}
        .menu button {
            display: block;
            width: 100%;
            background: none;
            border: none;
            padding: 10px;
            text-align: left;
            color: #ffffff;
            font-size: 14px;
            cursor: pointer;
        }
        .menu button:hover {
            background-color: #222;
        }
        .container {
    background: linear-gradient(135deg, #1e1e1e, #191414);
    color: white;
    padding: 20px;
    border-radius: 10px;
    width: 100%;
    max-width: 320px;
    margin: auto;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.3);
    border: 2px solid #444;
    text-align: center;
    font-size: 18px;
    font-weight: bold;
    transition: all 0.3s ease-in-out;
    position: relative;
    overflow: hidden;
}

.container:hover {
    background: linear-gradient(135deg, #333, #555);
    box-shadow: 0 4px 15px rgba(0, 132, 255, 0.5);
    border-color: #0084ff;
}

.container span {
    display: inline-block;
    margin-left: 10px;
    font-size: 20px;
    transition: transform 0.3s ease-in-out;
}

.container:hover span {
    transform: translateX(8px);
}

        input {
            width: 90%;
            padding: 12px;
            margin-top: 10px;
            border-radius: 5px;
            border: 2px solid #1DB954;
            font-size: 16px;
            text-align: center;
            background-color: #121212;
            color: white;
        }
        button {
            width: 100%;
            background-color: #1DB954;
            color: black;
            padding: 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin-top: 10px;
        }
        .progress-bar-container {
            width: 90%;
            max-width: 320px;
            margin: 20px auto;
            text-align: center;
        }
        .progress-bar {
            background: #535353;
            height: 12px;
            border-radius: 5px;
            position: relative;
            overflow: hidden;
        }
        .progress {
            height: 100%;
            width: 0%;
            border-radius: 5px;
            transition: width 0.3s ease-in-out, background-color 0.3s ease-in-out;
        }
        .progress-text {
            margin-top: 5px;
            font-size: 14px;
            font-weight: 600;
        }
        .balance-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
            font-size: 18px;
            font-weight: 600;
        }
        .add-button {
		    width:10%;
			margin-bottom:10px;
            background-color: #1DB954;
            color: black;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
        }
        .spent-list {
            max-height: 150px;
            overflow-y: auto;
            background: #191414;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            text-align: left;
        }
        .spent-list p {
            margin: 5px 0;
            padding: 5px;
            background: #222;
            border-radius: 3px;
        }
		.arrow {
    display: flex;
    justify-content: center; /* Centers the button horizontally */
    margin-top: 20px;
}

.arrow-button {
    width: 90%; /* Makes the button responsive */
    max-width: 320px; /* Prevents it from being too wide */
    background: linear-gradient(135deg, #1e1e1e, #333);
    color: white;
    border: 2px solid #444;
    padding: 12px 25px;
    font-size: 18px;
    font-weight: bold;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease-in-out;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    text-align: center;
}

.arrow-button:hover {
    background: linear-gradient(135deg, #333, #555);
    box-shadow: 0 4px 15px rgba(0, 132, 255, 0.5);
    border-color: #0084ff;
}

.arrow-button span {
    margin-left: 10px;
    font-size: 20px;
    transition: transform 0.3s ease-in-out;
}

.arrow-button:hover span {
    transform: translateX(8px);
}

		.popup-container {
    display: none; /* Initially hidden */
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: linear-gradient(135deg, #1e1e1e, #191414);
    color: white;
    padding: 20px;
    border-radius: 10px;
    width: 90%;
    height: 60%;
    max-width: 350px;
    box-shadow: 0px 4px 15px rgba(0, 132, 255, 0.5);
    border: 2px solid #0084ff;
    text-align: center;
    font-size: 18px;
    font-weight: bold;
    z-index: 1000;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.popup-container:hover {
    transform: translate(-50%, -50%) scale(1.05);
    box-shadow: 0px 6px 20px rgba(0, 132, 255, 0.7);
}

.back-button {
    font-size: 24px;
    cursor: pointer;
    color: white;
    position: left;
    top: 10px;
    left: 10px;
    background: none;
    border: none;
    transition: color 0.3s ease;
}

.back-button:hover {
    color: #1DB954;
}



.calculator {
      width: 90%;
      max-width: 350px;
      background: black;
      padding: 20px;
      border-radius: 30px;
      box-shadow: 0px 4px 15px rgba(255, 255, 255, 0.2);
      margin-top: 20px;
    }
    .calcDisplay {
      width: 100%;
      height: 80px;
      text-align: right;
      font-size: 40px;
      border: none;
      background: black;
      color: white;
      padding: 10px;
      border-radius: 10px;
    }
    .calcbuttons {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      margin-top: 20px;
    }
    
    .operator:hover {
      background: linear-gradient(135deg, orange, #ff8c00);
      box-shadow: 0 4px 15px rgba(255, 140, 0, 0.5);
      border: 2px solid #ff8c00;
    }
    .convert:hover {
      background: linear-gradient(135deg, #007AFF, #005FCC);
      box-shadow: 0 4px 15px rgba(0, 132, 255, 0.5);
      border: 2px solid #0084ff;
    }
    
    .operator {
      background: orange;
    }
    .zero {
      grid-column: span 2;
      width: 48vw;
      max-width: 150px;
      border-radius: 40px;
    }
    .convert {
      background: #007AFF;
      color: black;
    }
    .addinr {
  background-color: #fff;
  color: black;
  border: 2px solid red;
  transition: 0.3s ease;
  padding: 10px 20px;
  border-radius: 8px;
  cursor: pointer;
}

.addinr:hover {
  background-color: red;
  color: white;
}





.calculator button {
    padding: 15px;
    font-size: 18px;
    font-weight: bold;
    border: none;
    border-radius: 10px;
    background: #333;
    color: white;
    cursor: pointer;
    transition: all 0.3s ease-in-out;
}

.calculator button:hover:not(.operator):not(.convert):not(.addinr) {
    background: linear-gradient(135deg, #444, #666);
    box-shadow: 0 4px 12px rgba(255, 255, 255, 0.2);
    border: 2px solid #888;
}




.zero:hover {
    background: linear-gradient(135deg, #444, #666);
    box-shadow: 0 4px 12px rgba(255, 255, 255, 0.2);
    border: 2px solid #888;
}

.calcDisplay:focus {
    outline: 2px solid #1DB954;
}


    </style>
</head>
<body>
    <div class="header">
        <h2>Expense Tracker</h2>
        <button class="menu-icon" onclick="toggleMenu()">☰</button>	
    </div>
    
    <div class="menu" id="menu">
        <button onclick="resetSpent()">Reset Data</button>
		<button onclick="logout()">Logout</button>
    </div>

    <div class="container">
        
        <input type="number" id="amount" placeholder="Enter amount"><br>
		<input type="text" id="note" placeholder="Add note"><br>
        <button onclick="addExpense()">Pay</button>
    </div>
    
    <h3>Balance on Account</h3>
    <div class="progress-bar-container">
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        <div class="progress-text" id="progress-text">0 / 40,000,000</div>
        <div class="balance-container">
            <span id="total-balance">Total Balance: ₹40,000,000</span>
            <button class="add-button" onclick="addFunds()">+</button>
        </div>
    </div>
	
    <div class="spent-list" id="spent-list"></div>
	<div class="arrow">
	<button class="arrow-button" onclick="window.location.href='calculator.html'">CALCULATOR</button>
    <button class="arrow-button" onclick="openPopup()">
        ENTRIES <span>→</span>
    </button>
</div>


	<div class="popup-container" id="popup">
    <button class="back-button" onclick="closePopup()">← Back</button>
    <p>Welcome to the pop-up screen!</p>
</div>
<div id="password-popup" class="popup-container">
    <h3>Enter Password</h3>
    <input type="password" id="password-input" inputmode="numeric" maxlength="4" placeholder="****" style="font-size:20px; text-align:center; width: 80%; padding:10px;">

    <br><br>
    <button onclick="checkPassword()">Submit</button>
</div>






 <script>
 
 
    document.addEventListener("click", function(event) {
    let menu = document.getElementById("menu");
    let menuIcon = document.querySelector(".menu-icon");
    if (menu.style.display === "block" && !menu.contains(event.target) && event.target !== menuIcon) {
        menu.style.display = "none";
    }
});

   
    let balance = parseFloat(localStorage.getItem("balance")) || 0;
    let spent = parseFloat(localStorage.getItem("spent")) || 0;
    let spentEntries = JSON.parse(localStorage.getItem("spentEntries")) || [];

    function updateProgress() {
        let initialThreshold = 0;
        let effectiveThreshold = Math.max(initialThreshold, balance + spent);
        let percentage = (spent / effectiveThreshold) * 100;
        if (percentage > 100) percentage = 100;

        document.getElementById("progress").style.width = percentage + "%";
        document.getElementById("progress-text").innerText = `${spent.toLocaleString()} / ${effectiveThreshold.toLocaleString()}`;
        document.getElementById("total-balance").innerText = `Total Balance: ₹${balance.toLocaleString()}`;

        const red = 255;
        const green = Math.max(0, Math.floor((1 - percentage / 100) * 185));
        document.getElementById("progress").style.backgroundColor = `rgb(${red}, ${green}, 0)`;

        updateSpentList();
    }

    function addExpense() {
        let amount = parseFloat(document.getElementById("amount").value);
        let note = document.getElementById("note").value.trim();

        if (!isNaN(amount) && amount > 0 && amount <= balance) {
            spent += amount;
            balance -= amount;

            let entryText = `Spent: ₹${amount.toLocaleString()} - ${note || "No note"}`;
            spentEntries.push(entryText);

            localStorage.setItem("spent", spent);
            localStorage.setItem("balance", balance);
            localStorage.setItem("spentEntries", JSON.stringify(spentEntries));

            updateProgress();
            document.getElementById("amount").value = "";
            document.getElementById("note").value = "";
        }
    }

    function addFunds(amount) {
        if (typeof amount === 'undefined') {
            amount = prompt("Enter amount to add:");
            amount = parseFloat(amount);
        }

        if (!isNaN(amount) && amount > 0) {
            balance += amount;
            spentEntries.push(`Added: ₹${amount.toLocaleString()}`);
            localStorage.setItem("balance", balance);
            localStorage.setItem("spentEntries", JSON.stringify(spentEntries));
            updateProgress();
        }
    }

    function resetSpent() {
        spent = 0;
        balance = 0;
        spentEntries = [];
        localStorage.clear();
        updateProgress();
		
		document.getElementById("menu").style.display = "none";
    }

    function updateSpentList() {
        let list = document.getElementById("popup");
        list.innerHTML = `
            <button class="back-button" onclick="closePopup()">← Back</button>
            <h3>Spent List</h3>
            <div id="spent-list-popup" class="spent-list">
                ${spentEntries.map((entry, index) =>
                    `<p role="button" tabindex="0" onclick="handleSpentClick(${index})" 
                    onkeypress="handleKeyPress(event, ${index})">${entry}</p>`).join("")}
            </div>`;
    }

    function handleSpentClick(index) {
        alert(spentEntries[index]);
    }

    function handleKeyPress(event, index) {
        if (event.key === "Enter" || event.key === " ") {
            handleSpentClick(index);
        }
    }

    function toggleMenu() {
        let menu = document.getElementById("menu");
        menu.style.display = menu.style.display === "block" ? "none" : "block";
    }

    function openPopup() {
        let password = prompt("Enter 4-digit password:", "");
        if (password === "0505") {
            updateSpentList();
            document.getElementById("popup").style.display = "block";
        } else {
            alert("Incorrect password! Try again.");
        }
    }

    function closePopup() {
        document.getElementById("popup").style.display = "none";
    }

    function calcAddFunds() {
        let value = document.getElementById("calcDisplay").value;
        value = value.replace(" INR", "");
        let amount = parseFloat(value);

        if (!isNaN(amount) && amount > 0) {
            const confirmed = confirm(`Are you sure you want to add ₹${amount.toLocaleString()} to your balance?`);
            if (!confirmed) return;

            balance += amount;
            spentEntries.push(`Added: ₹${amount.toLocaleString()} (via Calculator)`);
            localStorage.setItem("balance", balance);
            localStorage.setItem("spentEntries", JSON.stringify(spentEntries));
            updateProgress();
            document.getElementById("calcDisplay").value = "";
        } else {
            alert("Invalid amount from calculator.");
        }
    }

    function logout() {
        sessionStorage.removeItem("authenticated");
        window.location.href = "index.html";
		
		document.getElementById("menu").style.display = "none";
    }

    // Initialize UI on load
    updateProgress();
</script>


</body>
</html>
